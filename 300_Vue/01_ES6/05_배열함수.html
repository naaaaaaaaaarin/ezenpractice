<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        ES6 배열함수
        : forEach(), map()
    </title>
    <!-- 부트스트랩 CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- CSS -->
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/font.css">
    <style>
        body {
            line-height: 2;
        }
    </style>

    <script>
        // (공통사용)문자열 퀄리 스트링 : 웹주소에 포함시키는 문자열
        const qs = 'banana=10&apple=20&orange=30';
        console.log(qs);

        /* // 0. 기본 for문
        function parse(qs){
            // substr(시작인덱스, 가져올 글자 수) = 0이면 해당 문자열을 다 가져옴
            let queryString = qs.substr(0);  // banana=10&apple=20&orange=30
            // alert(queryString);

            // split('해당기호')를 기준으로 문자열이 [배열]로 나뉘어짐
            let chunks = queryString.split('&'); // ['banan=10', 'apple=20', 'orange=30']
            // alert(chunks[0]);

            // 객체에 저장
            // result 변수를 객체 타입으로 선언
            var result = {};

            // for문 이용 배열 데이터 추출 -> 키, 벨류 쌍으로 
            for (let i=0;i<chunks.length;i++){
                let parts = chunks[i].split('='); // ['banana', 10] ['apple', 20] ['ornage', 30]
                let key = parts[0]; // 키 초기배열 0부터 시작
                let value = Number.isNaN(Number(parts[1])) ? parts[1] : Number(parts[1]);
                result[key] = value;
            };
            return result;
        };
        // 함수호출 변수 할당
        const params = parse(qs);
        // 결과값 출력
        console.log(params); */

        /* // 1. 배열함수 forEach() : 기존 for문의 i++, 배열크기 배열명.length 생략가능
        // 변수명 parse, 매개변수 qs 선언적 함수
        function parse(qs){
            const queryString = qs.substr(0);  // banana=10&apple=20&orange=30
            const chunks = queryString.split('&');  // ['banan=10', 'apple=20', 'orange=30']
            // 객체에 값 지정
            let result = {};

            // forEach() 사용할 배열의 데이터 추출
            // [형식] : 배열데이터변수.forEach((forEach추출 데이터 받을 변수명)=>{실행문});
            chunks.forEach((item)=>{
                // '='을 기준으로 key, value로 나뉨
                const [key, value] = item.split('=');  // key='banana', value='10' | key='apple', value='20' | key='orange', value='30'
                result[key] = value; // {banana: '10', apple: '20, orange: '30'}
            });
            return result;
        };
        // 함수호출 변수 할당 후 콘솔에 객체 데이터 출력
        const params = parse(qs);
        console.log(params); */

    /* 3. 배열함수 map()
    : 불변함수(const) 사용 시 주로 사용 
        각 배열 요소로 정의된 함수를 통해 반환한 결괏값을 [새로운 배열]로 반환
        즉, 배열을 가공하여 새 배열로 만드는 함수 
        # map()함수의 2가지 특징
        : a. 배열의 item(원소)를 실행하며 값을 출력
          b. 그 함수가 반환한 값들이 모여서 [배열]이 됨 
          c. (결론) map()을 사용하면 배열에 데이터가 몇개가 되던지 쉽게 데이터를 가공, 처리할 수 있음 */
        
        function parse(qs){
            const queryString = qs.substr(0);  // banana=10&apple=20&orange=30
            const chunks = queryString.split('&');  // ['banan=10', 'apple=20', 'orange=30']
            // map() 사용 배열데이터 추출
            // 사용형식 : 배열데이터변수.map((map추출데이터받을 변수명)=>{})
            const result = chunks.map((item)=>{
                // '='을 기준으로 key, value로 나뉨
                const [key, value] = item.split('=');
                return {
                    key: key,
                    value: value
                };
            });
            // 호출시 넘겨줄 값 = map()실행값
            return result;
        };
        // 함수호출 변수 할당
        const params = parse(qs);
        console.log(params);
    </script>
</head>

<body>

</body>
    
</html>